# Coronavirus analysis

This repository analyzes the activity of coronavirus hashtags on twitter using the partition-map-reduce paradigm.

# Dataset
The dataset analyzed is the set of all geotagged tweets from 2020. In total, around 1.1 billion tweets were analyzed.

# Partition
The dataset was pre-partitioned into zip files with each zip file containing all tweets for a given day in the year. Inside each zip file were 24 text files, one for each hour of the day. Each text file contained all the tweets made during that hour in JSON format, with one tweet per line in the text file.

# Map
The `src/map.py` file processes the partitioned zip file by extracting the language and origin country of the tweet containing the hashtags listed below:
```
    - #코로나바이러스  # korean
    - #コロナウイルス  # japanese
    - #冠状病毒        # chinese
    - #covid2019
    - #covid-2019
    - #covid19
    - #covid-19
    - #coronavirus
    - #corona
    - #virus
    - #flu
    - #sick
    - #cough
    - #sneeze
    - #hospital
    - #nurse
    - #doctor
```
For each zip file mapped, a `.lang` and a `.country` text files are generated in the `outputs` folder. They are text files containing the counts of the language and the origin country of tweets containing each hashtag in the list.

This process is automated using `map.sh` which calls `src/map.py` on all the partitioned zip files, running in parallel.

# Reduce
The `src/reduce.py` file was used to merge the outputs generated by the map so that we are able to analyze the dataset for the whole year of 2020 instead of analyzing them per day. This was done for both the `.lang` and `.country` files:
```
./src/reduce.py --input_paths outputs/*.lang --output_path=reduced.lang
./src/reduce.py --input_paths outputs/*.country --output_path=reduced.country
```

# Visualization
The `src/visualize.py` file is used to separate the data in the reduced files by hashtag and formats them to be more human-readable. This process of vizualizing all the hashtags by language and country was automated using `viz.sh` which utilizes the `head` command to only output the top 10 results for language/country for each hashtag. The final visualized data can be found in the `viz/` folder.

Unsurprisingly, for most hashtags, the most common language of the tweet was English and the most common country was the United States (US). The notable exceptions are the hashtags that are not in English. For these languags, the most common language of the tweet was the same as the language of the hashtag and the countries are the origin countries of those languages with the exception of the Chinese hashtag, which was actually seen most in Yemen (YE).
